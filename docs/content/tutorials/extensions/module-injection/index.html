<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Module Injection Filter  -- DNN Docs</title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Module Injection Filter  -- DNN Docs">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    <meta property="og:title" content="Module Injection Filter -- DNN Docs">
    <meta property="og:image" content="../../../../images/dnn_docs_logo.png">
    <meta property="og:description" content="Module Injection Filter -- DNN Docs">
    <meta property="og:url" content="https://docs.dnncommunity.org/content/tutorials/extensions/module-injection/index.html">
    
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-137422488-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-137422488-1');
    </script></head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../images/dnn_docs_logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="docs-search">
                <div class="form-group">
                  <input type="text" class="form-control docs-search" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container">
            <div class="hide-when-search pull-left" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
            <div class="pull-right">
              <ul class="nav nav-pills">
                <li role="presentation dropdown">
                  <a class="dropdown-toggle" id="shareMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <i class="glyphicon glyphicon-share"></i> Share
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="shareMenu">
                    <li><a href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fextensions%2Fmodule-injection%2Findex.html&amp;text=Module%20Injection%20Filter%20%7C%20DNN%20Docs%20%7C%20%23DNNCMS&amp;tw_p=tweetbutton&amp;url=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fextensions%2Fmodule-injection%2Findex.html" target="_blank"><i class="fab fa-twitter"></i> Twitter</a></li>
                    <li><a href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fextensions%2Fmodule-injection%2Findex.html" target="_blank"><i class="fab fa-linkedin-in"></i> LinkedIn</a></li>
                    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fextensions%2Fmodule-injection%2Findex.html" target="_blank"><i class="fab fa-facebook-square"></i> Facebook</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="mailto:?subject=[Shared%20Article]%20Module%20Injection%20Filter%20|%20DNN%20Docs&amp;body=Module%20Injection%20Filter%20|%20DNN%20Docs%0A%0Ahttps%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fextensions%2Fmodule-injection%2Findex.html%0A%0A"><i class="fas fa-envelope"></i> Email</a></li>
                  </ul>
                </li>
                <li role="presentation">
                  <a href="https://github.com/DNNCommunity/DNNDocs/issues/new?title=Feedback for Module Injection Filter&amp;body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23%23%23%23%20Document%20Details%0A%0A%E2%9A%A0%20*Do%20not%20edit%20this%20section.%20It%20is%20required%20for%20docs.dnncommunity.org%20%E2%9E%9F%20Core%20Team%20processing.*%0A%0A*%20Content%20Source%3A%20%5Bmodule-injection-filter%5D(https%3A%2F%2Fgithub.com%2FDNNCommunity%2FDNNDocs%2Fblob%2Fmain%2Fcontent%2Ftutorials%2Fextensions%2Fmodule-injection%2Findex.md%2F%23L1)" target="_blank"><i class="glyphicon glyphicon-comment"></i> Feedback</a>
                </li>
                <li role="presentation">
                  <a href="https://github.com/DNNCommunity/DNNDocs/blob/main/content/tutorials/extensions/module-injection/index.md/#L1" target="_blank"><i class="glyphicon glyphicon-new-window"></i> Improve this Doc</a>
                </li>
              </ul>
            </div>
          </div>
        </div>      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle"></a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="module-injection-filter">
<h1 id="module-injection-filters">Module Injection Filters</h1>
<div class="page-version">
    DNN Version: <span class="dnn-version">09.02.00</span>
    
</div>
<div class="page-stats row visible-xs">
    <div class="pull-left">12/8/2019 &bull; 5 minutes  to read</div>
    <div class="pull-left">Contributors&nbsp;
        <a href="https://github.com/david-poindexter" target="_blank">
            <img class="img-circle" src="https://avatars.githubusercontent.com/u/4568451?v=4" alt="david-poindexter">
        </a>
    </div>
</div>
<div class="page-stats row visible-sm visible-md visible-lg visible-xl">
    <span class="pull-left">12/8/2019</span>
    <span class="pull-left">&nbsp;&bull; 5 minutes  to read</span>
    <span class="pull-left">&nbsp;&bull;&nbsp;Contributors&nbsp;
        <a href="https://github.com/david-poindexter" target="_blank">
            <img class="img-circle" src="https://avatars.githubusercontent.com/u/4568451?v=4" alt="david-poindexter">
        </a>
    </span>
</div>

<p>Module Injection Filters are a mechanism in DNN that allows you to specify if a module should be displayed or hidden. When DNN is displaying a page, for every module on the page, it asks all of the Module Injection Filters whether it should add the module or not. If there is <em>any</em> module injection filter that excludes the module, then it won't be included on the page.  This is a fairly low-level extension point that can be used to enable some scenarios that are otherwise difficult to achieve.</p>
<h2 id="when-not-to-use">When Not to Use</h2>
<p>DNN's <a class="xref" href="../../../../api/DotNetNuke.UI.Modules.StandardModuleInjectionFilter.html"><code>StandardModuleInjectionFilter</code></a> takes care of hiding modules that are deleted, expired, or excluded via permissions. Much of the time, you'll want to use one of these mechanisms, rather than implementing a custom Module Injection Filter. For instance, if you are trying to dynamically show or hide content on a page based on a user's role, you should use the module's permissions setting instead.  If you just want to show/hide content <em>within</em> a custom module, it is usually more appropriate to place that logic inside the module.</p>
<h2 id="when-to-use">When to Use</h2>
<p>There are a number of scenarios that are not easily handled by any existing mechanism that DNN provides. If the criteria for hiding/showing a module cannot be tied to permissions (e.g. geolocation, cookie values, complex date/time rules, last visit date, etc.) then a custom Module Injection Filter may be a good avenue to consider. One good use case is A/B testing, the initial reason for development of the feature. Another reason to choose a custom Module Injection Filter is to apply one uniform hide/show rule to a variety of types of modules, or to modules that your team did not develop (whether built-in or third party).</p>
<p>One method you can use when hiding arbitrary modules is to leverage the Tags module setting to indicate modules which should be hidden in a certain scenario. For example, you could <a class="xref" href="../../sites/configuring-your-site/vocabularies/add-term-to-vocabulary/index.html">create two terms</a>, <em>Hide A</em> and <em>Hide B</em> to exclude content based on an A/B testing cookie value. Then when those terms are applied as a tag to a module, you can use a custom Module Injection Filter to show or hide the content appropriately. See the linked <a href="https://github.com/dnnsoftware/Dnn.InjectionFilter.Sample">GitHub Injection Filter Samples</a> for a starting point for a tag-based filter.</p>
<h2 id="how-to-add-a-module-injection-filter">How to Add a Module Injection Filter?</h2>
<p>DNN simply includes any class that implements <a class="xref" href="../../../../api/DotNetNuke.UI.Modules.IModuleInjectionFilter.html"><code>StandardModuleInjectionFilter</code></a> in the collection of filters to ask. To implement the interface, a class only needs to implement one method, <code>CanInjectModule</code>, which takes the relevant <code>ModuleInfo</code> and <code>PortalSettings</code> objects, and returns either True or False.</p>
<pre><code class="lang-csharp">    using DotNetNuke.Collections;
    using DotNetNuke.Entities.Modules;
    using DotNetNuke.Entities.Portals;
    using DotNetNuke.UI.Modules;

    public class ExampleModuleInjectionFilter : IModuleInjectionFilter
    {
        public bool CanInjectModule(ModuleInfo module, PortalSettings portalSettings)
        {
            var hide = module.ModuleSettings.GetValueOrDefault(&quot;HideOnTuesday&quot;, false);
            return hide &amp;&amp; DateTime.Today.DayOfWeek == DayOfWeek.Tuesday;
        }
    }
</code></pre>
<h2 id="how-to-deploy-a-module-injection-filter">How to Deploy a Module Injection Filter?</h2>
<p>If you are already deploying custom code (e.g. a custom module), you may want to include the class implementing your Module Injection Filter in the assembly containing your other code.  If you do not have other custom code or you do not want to combine the Module Injection Filter with existing code, you can compile the class into its own assembly and package it separately.  In the <a class="xref" href="../dnn-manifest-schema/index.html">manifest file</a>, choose <code>Library</code> for the package type, and use the <code>Assembly</code> component to install the assembly file into the <code>bin</code> folder.</p>
<pre><code class="lang-xml">&lt;dotnetnuke type=&quot;Package&quot; version=&quot;5.0&quot;&gt;
    &lt;packages&gt;
        &lt;package name=&quot;YourCompany.ExampleModuleInjectionFilter&quot; type=&quot;Library&quot; version=&quot;1.0.0&quot;&gt;
            &lt;friendlyName&gt;Example Module Injection Filter&lt;/friendlyName&gt;
            &lt;description&gt;Hides modules on Tuesdays based on a module setting.&lt;/description&gt;
            &lt;owner&gt;
                &lt;name&gt;Your Name&lt;/name&gt;
                &lt;organization&gt;YourCompany&lt;/organization&gt;
                &lt;url&gt;www.example.com&lt;/url&gt;
                &lt;email&gt;support@example.com&lt;/email&gt;
            &lt;/owner&gt;
            &lt;license src=&quot;License.txt&quot; /&gt;
            &lt;releaseNotes src=&quot;ReleaseNotes.txt&quot; /&gt;
            &lt;azureCompatible&gt;true&lt;/azureCompatible&gt;
            &lt;components&gt;
                &lt;component type=&quot;Assembly&quot;&gt;
                    &lt;assemblies&gt;
                        &lt;assembly&gt;
                            &lt;path&gt;bin&lt;/path&gt;
                            &lt;name&gt;YourCompany.ExampleModuleInjectionFilter.dll&lt;/name&gt;
                            &lt;version&gt;1.0.0&lt;/version&gt;
                        &lt;/assembly&gt;
                    &lt;/assemblies&gt;
                &lt;/component&gt;
            &lt;/components&gt;
        &lt;/package&gt;
    &lt;/packages&gt;
&lt;/dotnetnuke&gt;
</code></pre>
<div class="related-topics" hidden=""><span><a href="/content/tutorials/modules/about-modules/module-features/index.html">Common Module Features</a></span><span><a href="/content/tutorials/modules/creating-modules/developers-creating-modules-overview/index.html">Creating a Module</a></span></div><div class="links" hidden=""><span><a href="https://www.dnnsoftware.com/community-blog/cid/155402/discover-dnn-module-injection-filters">DNN Community Blog: Discover DNN Module Injection Filters</a></span><span><a href="https://github.com/dnnsoftware/Dnn.InjectionFilter.Sample">GitHub Injection Filter Samples</a></span></div></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>by the community, for the community... <strong>#DNNCMS</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
    	document.dnndocs = {
    		algolia: function(selector) {
    			return {
    				apiKey: '28b61113e36d4775658a3e6eec04e94f',
    				indexName: 'dnnsoftware',
    				inputSelector: selector,
    				algoliaOptions: { 'facetFilters': [["tags:api","tags:docs"]] },
    				debug: false // Set debug to true if you want to inspect the dropdown
    			}	
    		}
    	};	
    	docsearch(document.dnndocs.algolia('input.docs-search'));  
    </script>
  </body>
</html>
