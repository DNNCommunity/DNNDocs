<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>MVC Controller  -- DNN Docs</title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="MVC Controller  -- DNN Docs">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../../styles/main.css">
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <meta property="docfx:navrel" content="../../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    <meta property="og:title" content="MVC Controller -- DNN Docs">
    <meta property="og:image" content="../../../../../images/dnn_docs_logo.png">
    <meta property="og:description" content="MVC Controller -- DNN Docs">
    <meta property="og:url" content="https://docs.dnncommunity.org/content/tutorials/modules/mvc-modules/mvc-module-mvccontroller/index.html">
    
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-137422488-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-137422488-1');
    </script></head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../../index.html">
                <img id="logo" class="svg" src="../../../../../images/dnn_docs_logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="docs-search">
                <div class="form-group">
                  <input type="text" class="form-control docs-search" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container">
            <div class="hide-when-search pull-left" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
            <div class="pull-right">
              <ul class="nav nav-pills">
                <li role="presentation dropdown">
                  <a class="dropdown-toggle" id="shareMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <i class="glyphicon glyphicon-share"></i> Share
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="shareMenu">
                    <li><a href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fmodules%2Fmvc-modules%2Fmvc-module-mvccontroller%2Findex.html&amp;text=MVC%20Controller%20%7C%20DNN%20Docs%20%7C%20%23DNNCMS&amp;tw_p=tweetbutton&amp;url=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fmodules%2Fmvc-modules%2Fmvc-module-mvccontroller%2Findex.html" target="_blank"><i class="fab fa-twitter"></i> Twitter</a></li>
                    <li><a href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fmodules%2Fmvc-modules%2Fmvc-module-mvccontroller%2Findex.html" target="_blank"><i class="fab fa-linkedin-in"></i> LinkedIn</a></li>
                    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fmodules%2Fmvc-modules%2Fmvc-module-mvccontroller%2Findex.html" target="_blank"><i class="fab fa-facebook-square"></i> Facebook</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="mailto:?subject=[Shared%20Article]%20MVC%20Controller%20|%20DNN%20Docs&amp;body=MVC%20Controller%20|%20DNN%20Docs%0A%0Ahttps%3A%2F%2Fdocs.dnncommunity.org%2Fcontent%2Ftutorials%2Fmodules%2Fmvc-modules%2Fmvc-module-mvccontroller%2Findex.html%0A%0A"><i class="fas fa-envelope"></i> Email</a></li>
                  </ul>
                </li>
                <li role="presentation">
                  <a href="https://github.com/DNNCommunity/DNNDocs/issues/new?title=Feedback for MVC Controller&amp;body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23%23%23%23%20Document%20Details%0A%0A%E2%9A%A0%20*Do%20not%20edit%20this%20section.%20It%20is%20required%20for%20docs.dnncommunity.org%20%E2%9E%9F%20Core%20Team%20processing.*%0A%0A*%20Content%20Source%3A%20%5Bmvc-module-mvccontroller%5D(https%3A%2F%2Fgithub.com%2FDNNCommunity%2FDNNDocs%2Fblob%2Fmain%2Fcontent%2Ftutorials%2Fmodules%2Fmvc-modules%2Fmvc-module-mvccontroller%2Findex.md%2F%23L1)" target="_blank"><i class="glyphicon glyphicon-comment"></i> Feedback</a>
                </li>
                <li role="presentation">
                  <a href="https://github.com/DNNCommunity/DNNDocs/blob/main/content/tutorials/modules/mvc-modules/mvc-module-mvccontroller/index.md/#L1" target="_blank"><i class="glyphicon glyphicon-new-window"></i> Improve this Doc</a>
                </li>
              </ul>
            </div>
          </div>
        </div>      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle"></a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="mvc-module-mvccontroller">
<h1 id="mvc-controller">MVC Controller</h1>
<div class="page-version">
    DNN Version: <span class="dnn-version">09.02.00</span>
    
</div>
<div class="page-stats row visible-xs">
    <div class="pull-left">12/8/2019 &bull; 5 minutes  to read</div>
    <div class="pull-left">Contributors&nbsp;
        <a href="https://github.com/david-poindexter" target="_blank">
            <img class="img-circle" src="https://avatars.githubusercontent.com/u/4568451?v=4" alt="david-poindexter">
        </a>
    </div>
</div>
<div class="page-stats row visible-sm visible-md visible-lg visible-xl">
    <span class="pull-left">12/8/2019</span>
    <span class="pull-left">&nbsp;&bull; 5 minutes  to read</span>
    <span class="pull-left">&nbsp;&bull;&nbsp;Contributors&nbsp;
        <a href="https://github.com/david-poindexter" target="_blank">
            <img class="img-circle" src="https://avatars.githubusercontent.com/u/4568451?v=4" alt="david-poindexter">
        </a>
    </span>
</div>

<h2 id="overview">Overview</h2>
<p>In a Web Forms module, the module is controlled by <code>.ascx</code> user controls, which are rendered on the page. However, in an MVC module, the module is controlled by MVC controller action methods that return an MVC view, which is rendered on the page.</p>
<h2 id="action-methods">Action Methods</h2>
<p>To render an MVC module control, DNN uses the module's control source definition. If your project was created from the DNN MVC template, the manifest defines a default view with the following control source:</p>
<pre><code>
    &lt;moduleControl&gt;
        &lt;controlKey /&gt;
        &lt;controlSrc&gt;Dnn.Modules.CompanyName.MyMvcModule.Controllers/Item/Index.mvc&lt;/controlSrc&gt;
        ...
    &lt;/moduleControl&gt;
			
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>The <code>controlSrc</code> value is not a file path. In an MVC module, the control sources are specified using the format: <code>{Controller Namespace}/{Controller Name}Controller/{Action Method Name}.mvc</code>.</p>
</div>
<p>The above control source looks for the method Index() in the class Dnn.Modules.CompanyName.MyMvcModule.Controllers.ItemController, which implements the abstract base class DotNetNuke.Web.Mvc.Framework.Controllers.DnnController.</p>
<p>Example: In the following code, the action method asks the data layer (ItemManager) for the list of all item objects for that module instance.</p>
<pre><code>
    public class ItemController : DnnController
    {
        public ActionResult Index()
        {
            var items = ItemManager.Instance.GetItems(ModuleContext.ModuleId);
            return View(items);
        }
    }
                
</code></pre>
<p>The resulting list is the Model data, which is then passed to the View component and returned.</p>
<h2 id="module-action-menu">Module Action Menu</h2>
<p><img src="/images/scr-actionmenu-edit-icons.png" alt="Module action menu"></p>
<p>The module action menu can be customized for your MVC module by adding DotNetNuke.Web.Mvc.Framework.ActionFilters.ModuleActionAttribute to the default view's action method.</p>
<p>The following code excerpt is found above the ItemController.Index() method in the example provided by the MVC template project.</p>
<pre><code>
    [ModuleAction(ControlKey = &quot;Edit&quot;, TitleKey = &quot;AddItem&quot;)]
    public ActionResult Index()
    {
        ...
    }
			
</code></pre>
<p>The ModuleActionAttribute properties include the following:</p>
<ul>
<li>ControlKey. The name of the module view control's key, used to specify the controller action that is invoked when the user clicks the menu item.</li>
<li>Icon. The image to be used as the icon next to the menu item text. The default is the pencil icon.</li>
<li>SecurityAccessLevel. The access level needed in order to access the menu item. One of the enumerated values in DotNetNuke.Security.SecurityAccessLevel.</li>
<li>Title. The menu item text.</li>
<li>TitleKey. The menu item key. If getting the text from a resource file, use this instead of the Title attribute. In the above example, it expects a resource named <code>AddItem.Text</code> in the Item.resx file.</li>
</ul>
<h2 id="returning-the-actionresult">Returning the ActionResult</h2>
<p>The main purpose of the MVC controller action methods is to populate a view with the model data. The return type of the action methods is the abstract System.Web.Mvc.ActionResult, which has many possible subtypes, including the two return types that are most commonly used for a DNN MVC module: ViewResult and RedirectToRouteResult.</p>
<p>ViewResult returns a rendered view that is named after the action method. RedirectToRouteResult redirects to another controller action. Likewise, the DnnController.RedirectToDefaultRoute() is typically called to redirect to the default module view.</p>
<p>Note: See <a class="xref" href="../unsupported-mvc-features/index.html">Unsupported MVC Features</a> for the list of unsupported ActionResult types.</p>
<h2 id="passing-data-to-the-view">Passing Data to the View</h2>
<p>The two constructs typically used to pass data into the view are the Model and the ViewBag.</p>
<ul>
<li><p>Model</p>
<p>The Model is a &quot;plain old CLR object&quot; (POCO). When using your module's data layer, it is common to use a DAL2 entity class as your model. From the template-generated code, the ItemManager is a DAL2 data repository class that populates an IEnumerable list of Item objects. The list is passed to the View, where the Razor code generates the HTML code.</p>
<pre><code>
    public ActionResult Index()
    {
        var items = ItemManager.Instance.GetItems(ModuleContext.ModuleId);
        return View(items);
    }

</code></pre>
</li>
<li><p>ViewBag</p>
<p>MVC views are built to render a specific model. Occasionally, passing extra data to the view outside of the model's scope can be helpful; e.g., to pass the module's relative path to avoid hardcoding a stylesheet in the view. Because the ViewBag allows dynamic properties, you can define a new dynamic property (e.g., ModulePath) for the action method and use that property in your view.</p>
<p>Example: In ItemController.cs:</p>
<pre><code>
    public ActionResult Index()
    {
        var items = ItemManager.Instance.GetItems(ModuleContext.ModuleId);
        ViewBag.ModulePath = $&quot;~/DesktopModules/MVC/{ModuleContext.Configuration.DesktopModule.FolderName}&quot;;
        return View(items);
    }

</code></pre>
<p>In Index.cshtml:</p>
<pre><code>
    @{
        ClientResourceManager.RegisterStyleSheet(Dnn.DnnPage, ViewBag.ModulePath + &quot;/Resources/bootstrap/css/bootstrap.min.css&quot;);
    }

</code></pre>
</li>
</ul>
<div class="related-topics" hidden=""><span><a href="/content/tutorials/modules/mvc-modules/mvc-module-project-overview/index.html">MVC Module Project Overview</a></span><span><a href="/content/tutorials/modules/mvc-modules/mvc-module-mvcviews/index.html">MVC Views</a></span><span><a href="/content/tutorials/modules/mvc-modules/mvc-module-unittest/index.html">Create a Unit Test for an MVC module</a></span><span><a href="/content/tutorials/modules/mvc-modules/unsupported-mvc-features/index.html">Unsupported MVC Features</a></span></div></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>by the community, for the community... <strong>#DNNCMS</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../../styles/main.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
    	document.dnndocs = {
    		algolia: function(selector) {
    			return {
    				apiKey: '28b61113e36d4775658a3e6eec04e94f',
    				indexName: 'dnnsoftware',
    				inputSelector: selector,
    				algoliaOptions: { 'facetFilters': [["tags:api","tags:docs"]] },
    				debug: false // Set debug to true if you want to inspect the dropdown
    			}	
    		}
    	};	
    	docsearch(document.dnndocs.algolia('input.docs-search'));  
    </script>
  </body>
</html>
